#!/bin/sh
set -eu

repo_root="$(git rev-parse --show-toplevel)"
cd "$repo_root"

if command -v poetry >/dev/null 2>&1; then
  exec poetry run pre-commit run --hook-stage commit
fi

if command -v pre-commit >/dev/null 2>&1; then
  exec pre-commit run --hook-stage commit
fi

echo "pre-commit is not installed. Install dependencies with 'poetry install' first." >&2
exit 1
